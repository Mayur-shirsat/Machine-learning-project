<!DOCTYPE html>
<html>
<head>
    <title>Lead Scoring</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Lead Scoring Form</h1>
    <form id="lead-form">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required><br><br>
        <label for="interaction_count">Interaction Count:</label>
        <input type="number" id="interaction_count" name="interaction_count" required><br><br>
        <label for="page_views">Page Views:</label>
        <input type="number" id="page_views" name="page_views" required><br><br>
        <label for="time_on_site">Time on Site (seconds):</label>
        <input type="number" id="time_on_site" name="time_on_site" required><br><br>
        <button type="submit">Submit</button>
    </form>
    <h2>Lead Score</h2>
    <div id="lead-score"></div>

    <script>
        $(document).ready(function() {
            $('#lead-form').on('submit', function(event) {
                event.preventDefault();
                const formData = {
                    name: $('#name').val(),
                    interaction_count: $('#interaction_count').val(),
                    page_views: $('#page_views').val(),
                    time_on_site: $('#time_on_site').val()
                };
                $.ajax({
                    url: 'http://127.0.0.1:5000/score_lead',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(formData),
                    success: function(response) {
                        $('#lead-score').html(`<p>Name: ${response.name}</p><p>Lead Score: ${response.lead_score}</p><p>IP Address: ${response.ip_address}</p>`);
                    },
                    error: function(error) {
                        console.log("Error:", error);
                    }
                });
            });
        });
    </script>
</body>
</html>
